diff --git a/base/Dockerfile b/base/Dockerfile
index 0d4448b..1fdca41 100644
--- a/base/Dockerfile
+++ b/base/Dockerfile
@@ -10,7 +10,7 @@ ENV DEBIAN_FRONTEND noninteractive
 
 # Install dependencies
 RUN apt-get update \
-    && apt-get -y install gcc cmake autoconf libtool pkg-config libmnl-dev libyaml-dev apt-transport-https ca-certificates
+    && apt-get -y install git gcc cmake autoconf libtool pkg-config libmnl-dev libyaml-dev apt-transport-https ca-certificates
 
 # Install Nodejs20
 RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - \
diff --git a/base/Dockerfile.nf b/base/Dockerfile.nf
index 11ededf..f717456 100644
--- a/base/Dockerfile.nf
+++ b/base/Dockerfile.nf
@@ -8,7 +8,9 @@ ENV DEBIAN_FRONTEND noninteractive
 ARG F5GC_MODULE
 
 # Get Free5GC
-COPY free5gc/ $GOPATH/src/free5gc/
+RUN git clone --recurse-submodules https://github.com/free5gc/free5gc $GOPATH/src/free5gc/
+RUN rm -rf $GOPATH/src/free5gc/NFs/upf
+ADD go-upf $GOPATH/src/free5gc/NFs/upf
 
 RUN cd $GOPATH/src/free5gc \
     && make ${F5GC_MODULE}
diff --git a/base/Dockerfile.nf.webconsole b/base/Dockerfile.nf.webconsole
index d9c8323..6377c4e 100644
--- a/base/Dockerfile.nf.webconsole
+++ b/base/Dockerfile.nf.webconsole
@@ -7,7 +7,9 @@ FROM free5gc/base as my-base
 ENV DEBIAN_FRONTEND noninteractive
 
 # Get Free5GC
-COPY free5gc/ $GOPATH/src/free5gc/
+RUN git clone --recurse-submodules https://github.com/free5gc/free5gc $GOPATH/src/free5gc/
+RUN rm -rf $GOPATH/src/free5gc/NFs/upf
+ADD go-upf $GOPATH/src/free5gc/NFs/upf
 
 RUN cd $GOPATH/src/free5gc \
     && apt-get update \
